/* ==========================================================================
   MiniChart Component - 星辰图书馆设计系统
   Celestial Library Design System
   ========================================================================== */

/* ==========================================================================
   MINI CHART - 迷你图表
   ========================================================================== */

.miniChart {
  width: 100%;
  position: relative;
}

.miniChartSvg {
  overflow: visible;
}

/* ==========================================================================
   CHART ANIMATIONS
   ========================================================================== */

/* Fill Animation - Starlight Glow */
.miniChartFill {
  animation: chartFill var(--duration-1000) var(--ease-out) forwards;
  filter: drop-shadow(0 2px 8px rgba(212, 175, 55, 0.2));
}

/* Line Animation - Golden Trace */
.miniChartLine {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: chartDraw var(--duration-1000) var(--ease-out) forwards;
  animation-delay: var(--duration-300);
  filter: drop-shadow(0 0 4px rgba(212, 175, 55, 0.4));
}

/* Keyframes */
@keyframes chartFill {
  from {
    opacity: 0;
    transform: scaleY(0);
    transform-origin: bottom;
  }
  to {
    opacity: 1;
    transform: scaleY(1);
  }
}

@keyframes chartDraw {
  to {
    stroke-dashoffset: 0;
  }
}

/* ==========================================================================
   CHART POINTS - 数据点
   ========================================================================== */

.miniChartPoint {
  fill: var(--starlight-400);
  filter: drop-shadow(0 0 6px rgba(212, 175, 55, 0.6));
  transition: all var(--duration-200) var(--ease-out);
}

.miniChartPoint:hover {
  fill: var(--starlight-300);
  filter: drop-shadow(0 0 10px rgba(212, 175, 55, 0.8));
  transform: scale(1.5);
}

[data-theme="light"] .miniChartPoint {
  fill: var(--starlight-600);
  filter: drop-shadow(0 0 4px rgba(167, 139, 29, 0.4));
}

[data-theme="light"] .miniChartPoint:hover {
  fill: var(--starlight-500);
  filter: drop-shadow(0 0 8px rgba(167, 139, 29, 0.6));
}

/* ==========================================================================
   CHART GRADIENT DEFINITIONS
   ========================================================================== */

.miniChartGradient {
  --gradient-start: rgba(212, 175, 55, 0.4);
  --gradient-end: rgba(212, 175, 55, 0);
}

[data-theme="light"] .miniChartGradient {
  --gradient-start: rgba(167, 139, 29, 0.3);
  --gradient-end: rgba(167, 139, 29, 0);
}

/* ==========================================================================
   CHART TOOLTIP
   ========================================================================== */

.miniChartTooltip {
  position: absolute;
  padding: var(--space-2) var(--space-3);
  font-size: 0.75rem;
  font-weight: 500;
  border-radius: var(--radius-md);
  pointer-events: none;
  white-space: nowrap;
  z-index: 10;

  /* Celestial Tooltip */
  background: linear-gradient(
    135deg,
    rgba(15, 23, 42, 0.95) 0%,
    rgba(30, 41, 59, 0.9) 100%
  );
  border: 1px solid rgba(212, 175, 55, 0.3);
  color: var(--starlight-300);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.3),
    0 0 12px rgba(212, 175, 55, 0.15);

  /* Animation */
  opacity: 0;
  transform: translateY(4px);
  transition: all var(--duration-200) var(--ease-out);
}

.miniChartTooltip.visible {
  opacity: 1;
  transform: translateY(0);
}

[data-theme="light"] .miniChartTooltip {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.98) 0%,
    rgba(254, 249, 231, 0.95) 100%
  );
  border-color: rgba(167, 139, 29, 0.25);
  color: var(--starlight-700);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.1),
    0 0 8px rgba(167, 139, 29, 0.1);
}

/* ==========================================================================
   ACCESSIBILITY
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  .miniChartFill,
  .miniChartLine {
    animation: none;
    stroke-dashoffset: 0;
    opacity: 1;
    transform: none;
  }

  .miniChartPoint {
    transition: none;
  }

  .miniChartTooltip {
    transition: none;
  }
}
